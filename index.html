<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Powerful CSV Viewer</title>
<style>
    body { font-family: Arial,sans-serif; padding: 20px; background:#f7f7f7; }
    h2 { text-align:center; }
    #fileInput { display:block; margin:20px auto; padding:10px; }
    .table-container { width:100%; overflow-x:auto; }
    table { border-collapse: collapse; width:100%; background:white; }
    th, td { border:1px solid #333; padding:8px; text-align:left; font-size:14px; }
    th { background:#222; color:white; position:sticky; top:0; }
    tr:nth-child(even) { background:#f2f2f2; }
</style>
</head>
<body>

<h2>Powerful CSV Viewer</h2>
<input type="file" id="fileInput" accept=".csv">

<div class="table-container">
    <table id="csvTable"></table>
</div>

<script>
document.getElementById("fileInput").addEventListener("change", function(e){
    let file = e.target.files[0];
    if(!file) { alert("कृपया CSV फ़ाइल चुनें"); return; }

    let reader = new FileReader();
    reader.onload = function(event){
        let text = event.target.result;
        displayCSV(text);
    };
    reader.readAsText(file,"UTF-8");
});

function displayCSV(csvText){
    csvText = csvText.replace(/\r/g,"");
    let rows = csvText.split("\n").filter(r=>r.trim()!=="");

    let table = document.getElementById("csvTable");
    table.innerHTML = "";

    rows.forEach((row,index)=>{
        let tr = document.createElement("tr");
        let cols = parseCSVRow(row);

        cols.forEach(col=>{
            let cell = document.createElement(index===0?"th":"td");
            cell.textContent = col.trim();
            tr.appendChild(cell);
        });

        table.appendChild(tr);
    });
}

function parseCSVRow(row){
    let result = [];
    let col = "";
    let inQuotes = false;

    for(let i=0;i<row.length;i++){
        let char = row[i];

        if(char=='"'){
            inQuotes = !inQuotes;
        }
        else if(char==',' && !inQuotes){
            result.push(col);
            col="";
        }
        else{
            col+=char;
        }
    }
    result.push(col);
    return result;
}
</script>

</body>
</html>
