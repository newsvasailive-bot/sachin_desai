<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>CSV Viewer Powerful Script</title>

<style>
    body{
        font-family: Arial, sans-serif;
        background:#f7f7f7;
        padding:20px;
    }
    h2{
        text-align:center;
    }
    #csvTable{
        width:100%;
        border-collapse: collapse;
        margin-top:20px;
    }
    #csvTable th, #csvTable td{
        border:1px solid #555;
        padding:8px;
        text-align:left;
        font-size:14px;
    }
    #csvTable th{
        background:#222;
        color:white;
    }
    input{
        margin:10px 0;
    }
</style>
</head>

<body>

<h2>CSV Viewer (Powerful Script)</h2>

<input type="file" id="fileInput" accept=".csv">

<table id="csvTable"></table>

<script>
document.getElementById("fileInput").addEventListener("change", function(e){
    let file = e.target.files[0];
    if(!file){
        alert("कृपया CSV फ़ाइल चुनें");
        return;
    }

    let reader = new FileReader();
    reader.onload = function(event){
        let text = event.target.result;
        processCSV(text);
    };
    reader.readAsText(file, "UTF-8");
});


function processCSV(csvText){
    let rows = csvText.split(/\r?\n/).filter(r => r.trim() !== "");

    let table = document.getElementById("csvTable");
    table.innerHTML = "";

    rows.forEach((row, index) => {
        let cols = parseCSVRow(row);
        let tr = document.createElement("tr");

        cols.forEach(col => {
            let cell = document.createElement(index === 0 ? "th" : "td");
            cell.textContent = col;
            tr.appendChild(cell);
        });

        table.appendChild(tr);
    });

    alert("CSV Successfully Loaded!");
}

function parseCSVRow(row){
    let result = [];
    let col = "";
    let inQuotes = false;

    for (let i = 0; i < row.length; i++) {
        let char = row[i];

        if (char === '"' && row[i + 1] === '"') {
            col += '"';
            i++;
        }
        else if (char === '"') {
            inQuotes = !inQuotes;
        }
        else if (char === ',' && !inQuotes) {
            result.push(col);
            col = "";
        }
        else {
            col += char;
        }
    }
    result.push(col);
    return result;
}
</script>

</body>
</html>
