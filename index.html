<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Text to CSV Converter</title>

<style>
body { font-family: Arial; padding:20px; background:#f3f3f3; }
h2 { text-align:center; margin-bottom:20px; }

.box {
    width: 100%;
    height: 160px;
    padding: 10px;
    margin-bottom: 15px;
    border: 1px solid #ccc;
    border-radius: 5px;
    background: white;
    font-size: 15px;
    resize: vertical;
}

button {
    padding: 10px 20px;
    font-size: 16px;
    background: #007bff;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

button:hover { background:#0056b3; }

#outputBox {
    margin-top: 20px;
    white-space: pre;
    background: #e9e9e9;
    padding: 15px;
    border-radius: 5px; 
}
</style>
</head>
<body>

<h2>Text → CSV Converter (Sample Based)</h2>

<h3>1️⃣ Sample CSV Format (जिस तरह का आउटपुट चाहिए)</h3>
<textarea id="sampleCSV" class="box" placeholder="यहाँ अपना sample CSV डालें..."></textarea>

<h3>2️⃣ Raw Text Input (PDF/Text से निकला हुआ)</h3>
<textarea id="rawText" class="box" placeholder="यहाँ गंदा text paste करें..."></textarea>

<button onclick="convert()">Convert to CSV</button>

<h3>Converted CSV Output:</h3>
<pre id="outputBox"></pre>

<script>
function convert() {
    let sample = document.getElementById("sampleCSV").value.trim();
    let raw = document.getElementById("rawText").value.trim();

    if (!sample || !raw) {
        alert("कृपया दोनों Box भरें!");
        return;
    }

    // SAMPLE HEADER निकालें
    let header = sample.split("\n")[0];

    // RAW को लाइनों में बदलें
    let lines = raw.split("\n").map(l => l.trim()).filter(l => l.length > 0);

    let output = header + "\n";

    // SAMPLE कॉलम की संख्या के हिसाब से split
    let columnCount = header.split(",").length;

    lines.forEach((line, index) => {
        let parts = line.split(/\s+/);  // space से all split

        // columns ऑटो trim
        let row = [];

        for (let i = 0; i < columnCount; i++) {
            row.push(parts[i] ? `"${parts[i]}"` : "");
        }

        output += row.join(",") + "\n";
    });

    document.getElementById("outputBox").textContent = output;

    // File Download
    let blob = new Blob([output], { type: "text/csv" });
    let url = URL.createObjectURL(blob);
    let a = document.createElement("a");
    a.href = url;
    a.download = "converted.csv";
    a.click();
}
</script>

</body>
</html>
